<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="827px" preserveAspectRatio="none" style="width:1884px;height:827px;background:#FFFFFF;" version="1.1" viewBox="0 0 1884 827" width="1884px" zoomAndPan="magnify"><defs/><g><!--MD5=[ca7002ded7138e739573283b33835c75]
class IMessageAction--><g id="elem_IMessageAction"><rect codeLine="2" fill="#F1F1F1" height="83.2188" id="IMessageAction" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="432" x="388" y="220.5"/><ellipse cx="549.25" cy="236.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M550.2031,233.1406 L550.2031,239.7969 L551.9219,239.7969 Q552.5313,239.7969 552.7969,240.0313 Q553.0625,240.2656 553.0625,240.6563 Q553.0625,241.0313 552.7969,241.2656 Q552.5313,241.5 551.9219,241.5 L546.7813,241.5 Q546.1719,241.5 545.9063,241.2656 Q545.6406,241.0313 545.6406,240.6406 Q545.6406,240.2656 545.9063,240.0313 Q546.1719,239.7969 546.7813,239.7969 L548.5,239.7969 L548.5,233.1406 L546.7813,233.1406 Q546.1719,233.1406 545.9063,232.9063 Q545.6406,232.6719 545.6406,232.2813 Q545.6406,231.9063 545.9063,231.6719 Q546.1719,231.4375 546.7813,231.4375 L551.9219,231.4375 Q552.5313,231.4375 552.7969,231.6719 Q553.0625,231.9063 553.0625,232.2813 Q553.0625,232.6719 552.7969,232.9063 Q552.5313,233.1406 551.9219,233.1406 L550.2031,233.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="101" x="569.75" y="242.2285">IMessageAction</text><line style="stroke:#181818;stroke-width:0.5;" x1="389" x2="819" y1="252.5" y2="252.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="389" x2="819" y1="260.5" y2="260.5"/><ellipse cx="399" cy="274.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="368" x="408" y="279.0332">Action(clientId : string, topic : string, payload : string) : void</text><ellipse cx="399" cy="292.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="406" x="408" y="296.6426">CanExecute(clientId : string, topic : string, payload : string) : bool</text></g><!--MD5=[8166855cf232c7469ad4df4783d26ec8]
class IServerHandler--><g id="elem_IServerHandler"><rect codeLine="7" fill="#F1F1F1" height="118.4375" id="IServerHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="437" x="855.5" y="203"/><ellipse cx="1022.25" cy="219" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1023.2031,215.6406 L1023.2031,222.2969 L1024.9219,222.2969 Q1025.5313,222.2969 1025.7969,222.5313 Q1026.0625,222.7656 1026.0625,223.1563 Q1026.0625,223.5313 1025.7969,223.7656 Q1025.5313,224 1024.9219,224 L1019.7813,224 Q1019.1719,224 1018.9063,223.7656 Q1018.6406,223.5313 1018.6406,223.1406 Q1018.6406,222.7656 1018.9063,222.5313 Q1019.1719,222.2969 1019.7813,222.2969 L1021.5,222.2969 L1021.5,215.6406 L1019.7813,215.6406 Q1019.1719,215.6406 1018.9063,215.4063 Q1018.6406,215.1719 1018.6406,214.7813 Q1018.6406,214.4063 1018.9063,214.1719 Q1019.1719,213.9375 1019.7813,213.9375 L1024.9219,213.9375 Q1025.5313,213.9375 1025.7969,214.1719 Q1026.0625,214.4063 1026.0625,214.7813 Q1026.0625,215.1719 1025.7969,215.4063 Q1025.5313,215.6406 1024.9219,215.6406 L1023.2031,215.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="1042.75" y="224.7285">IServerHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="856.5" x2="1291.5" y1="235" y2="235"/><ellipse cx="866.5" cy="249.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="411" x="875.5" y="253.5332">MessageEventHandler {+get; +set;} : Action&lt;string, string, string&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="856.5" x2="1291.5" y1="260.6094" y2="260.6094"/><ellipse cx="866.5" cy="274.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="875.5" y="279.1426">StartAsync() : Task</text><ellipse cx="866.5" cy="292.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="319" x="875.5" y="296.752">PublishAsync(topic : string, payload : string) : Task</text><ellipse cx="866.5" cy="310.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="875.5" y="314.3613">StopAsync() : Task</text></g><!--MD5=[2d3c7cab7edd91a74acbc5a28d7dc89d]
class MqttServerHandler--><g id="elem_MqttServerHandler"><rect codeLine="14" fill="#F1F1F1" height="136.0469" id="MqttServerHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="616" x="1096" y="7"/><ellipse cx="1340.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1343.5156,18.875 Q1343.6719,18.6563 1343.8594,18.5469 Q1344.0469,18.4375 1344.2656,18.4375 Q1344.6406,18.4375 1344.875,18.6953 Q1345.1094,18.9531 1345.1094,19.5625 L1345.1094,21.0156 Q1345.1094,21.625 1344.875,21.8906 Q1344.6406,22.1563 1344.2656,22.1563 Q1343.9219,22.1563 1343.7188,21.9531 Q1343.5156,21.7656 1343.4063,21.25 Q1343.3594,20.8906 1343.1719,20.7031 Q1342.8438,20.3281 1342.2344,20.1094 Q1341.625,19.8906 1341,19.8906 Q1340.2344,19.8906 1339.6016,20.2188 Q1338.9688,20.5469 1338.4766,21.2969 Q1337.9844,22.0469 1337.9844,23.0781 L1337.9844,24.1719 Q1337.9844,25.4063 1338.875,26.2266 Q1339.7656,27.0469 1341.3594,27.0469 Q1342.2969,27.0469 1342.9531,26.7969 Q1343.3438,26.6406 1343.7656,26.2031 Q1344.0313,25.9375 1344.1797,25.8594 Q1344.3281,25.7813 1344.5313,25.7813 Q1344.8594,25.7813 1345.1172,26.0391 Q1345.375,26.2969 1345.375,26.6406 Q1345.375,26.9844 1345.0313,27.3906 Q1344.5313,27.9688 1343.7344,28.2969 Q1342.6563,28.75 1341.3594,28.75 Q1339.8438,28.75 1338.6406,28.125 Q1337.6563,27.625 1336.9688,26.5547 Q1336.2813,25.4844 1336.2813,24.2031 L1336.2813,23.0469 Q1336.2813,21.7188 1336.8984,20.5703 Q1337.5156,19.4219 1338.6094,18.8047 Q1339.7031,18.1875 1340.9375,18.1875 Q1341.6719,18.1875 1342.3203,18.3516 Q1342.9688,18.5156 1343.5156,18.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="1361.25" y="28.7285">MqttServerHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="1097" x2="1711" y1="39" y2="39"/><ellipse cx="1107" cy="53.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="174" x="1116" y="57.5332">ServerId {+get; -set} : string</text><ellipse cx="1107" cy="70.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="407" x="1116" y="75.1426">MessageEventHandler {+get; +set} : Action&lt;string, string, string&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1104" y="85.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="219" x="1116" y="92.752">mqttServer {readonly} : MqttServer</text><line style="stroke:#181818;stroke-width:0.5;" x1="1097" x2="1711" y1="99.8281" y2="99.8281"/><ellipse cx="1107" cy="114.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="278" x="1116" y="118.3613">MqttServerHandler(mqttServer : MqttServer)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1104" y="128.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="590" x="1116" y="135.9707">OnMessageNotConsumedAsync(packet : ApplicationMessageNotConsumedEventArgs) : Task</text></g><!--MD5=[4241c4cff2cafb733502a763d08b761b]
class ServerController--><g id="elem_ServerController"><rect codeLine="22" fill="#F1F1F1" height="118.4375" id="ServerController" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="532" x="529" y="16"/><ellipse cx="738.75" cy="32" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M741.5156,27.875 Q741.6719,27.6563 741.8594,27.5469 Q742.0469,27.4375 742.2656,27.4375 Q742.6406,27.4375 742.875,27.6953 Q743.1094,27.9531 743.1094,28.5625 L743.1094,30.0156 Q743.1094,30.625 742.875,30.8906 Q742.6406,31.1563 742.2656,31.1563 Q741.9219,31.1563 741.7188,30.9531 Q741.5156,30.7656 741.4063,30.25 Q741.3594,29.8906 741.1719,29.7031 Q740.8438,29.3281 740.2344,29.1094 Q739.625,28.8906 739,28.8906 Q738.2344,28.8906 737.6016,29.2188 Q736.9688,29.5469 736.4766,30.2969 Q735.9844,31.0469 735.9844,32.0781 L735.9844,33.1719 Q735.9844,34.4063 736.875,35.2266 Q737.7656,36.0469 739.3594,36.0469 Q740.2969,36.0469 740.9531,35.7969 Q741.3438,35.6406 741.7656,35.2031 Q742.0313,34.9375 742.1797,34.8594 Q742.3281,34.7813 742.5313,34.7813 Q742.8594,34.7813 743.1172,35.0391 Q743.375,35.2969 743.375,35.6406 Q743.375,35.9844 743.0313,36.3906 Q742.5313,36.9688 741.7344,37.2969 Q740.6563,37.75 739.3594,37.75 Q737.8438,37.75 736.6406,37.125 Q735.6563,36.625 734.9688,35.5547 Q734.2813,34.4844 734.2813,33.2031 L734.2813,32.0469 Q734.2813,30.7188 734.8984,29.5703 Q735.5156,28.4219 736.6094,27.8047 Q737.7031,27.1875 738.9375,27.1875 Q739.6719,27.1875 740.3203,27.3516 Q740.9688,27.5156 741.5156,27.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="759.25" y="37.7285">ServerController</text><line style="stroke:#181818;stroke-width:0.5;" x1="530" x2="1060" y1="48" y2="48"/><ellipse cx="540" cy="62.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="549" y="66.5332">Actions {+get; +set;} : list&lt;IMessageAction&gt;</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="537" y="76.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264" x="549" y="84.1426">serverHandler {readonly} : IServerHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="530" x2="1060" y1="91.2188" y2="91.2188"/><ellipse cx="540" cy="105.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="506" x="549" y="109.752">ServerController(actions : list&lt;IMessageAction&gt;, serverHandler : IServerHandler)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="537" y="120.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="464" x="549" y="127.3613">OnMessageReceived(clientId : string, topic : string, payload : string) : void</text></g><!--MD5=[78c26a6ab4a969e327d58a29ba2e2623]
class IDeviceManager--><g id="elem_IDeviceManager"><rect codeLine="29" fill="#F1F1F1" height="83.2188" id="IDeviceManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="346" x="7" y="220.5"/><ellipse cx="124.75" cy="236.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M127.5156,232.375 Q127.6719,232.1563 127.8594,232.0469 Q128.0469,231.9375 128.2656,231.9375 Q128.6406,231.9375 128.875,232.1953 Q129.1094,232.4531 129.1094,233.0625 L129.1094,234.5156 Q129.1094,235.125 128.875,235.3906 Q128.6406,235.6563 128.2656,235.6563 Q127.9219,235.6563 127.7188,235.4531 Q127.5156,235.2656 127.4063,234.75 Q127.3594,234.3906 127.1719,234.2031 Q126.8438,233.8281 126.2344,233.6094 Q125.625,233.3906 125,233.3906 Q124.2344,233.3906 123.6016,233.7188 Q122.9688,234.0469 122.4766,234.7969 Q121.9844,235.5469 121.9844,236.5781 L121.9844,237.6719 Q121.9844,238.9063 122.875,239.7266 Q123.7656,240.5469 125.3594,240.5469 Q126.2969,240.5469 126.9531,240.2969 Q127.3438,240.1406 127.7656,239.7031 Q128.0313,239.4375 128.1797,239.3594 Q128.3281,239.2813 128.5313,239.2813 Q128.8594,239.2813 129.1172,239.5391 Q129.375,239.7969 129.375,240.1406 Q129.375,240.4844 129.0313,240.8906 Q128.5313,241.4688 127.7344,241.7969 Q126.6563,242.25 125.3594,242.25 Q123.8438,242.25 122.6406,241.625 Q121.6563,241.125 120.9688,240.0547 Q120.2813,238.9844 120.2813,237.7031 L120.2813,236.5469 Q120.2813,235.2188 120.8984,234.0703 Q121.5156,232.9219 122.6094,232.3047 Q123.7031,231.6875 124.9375,231.6875 Q125.6719,231.6875 126.3203,231.8516 Q126.9688,232.0156 127.5156,232.375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="145.25" y="242.2285">IDeviceManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="352" y1="252.5" y2="252.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="352" y1="260.5" y2="260.5"/><ellipse cx="18" cy="274.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="27" y="279.0332">GetDevices() : List&lt;Device&gt;</text><ellipse cx="18" cy="292.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="320" x="27" y="296.6426">GetStatusDevices() : List&lt;DeviceStatusResponse&gt;</text></g><!--MD5=[ddcabfb5df69b947b9e01573aa153409]
class RequestStatusAction--><g id="elem_RequestStatusAction"><rect codeLine="34" fill="#F1F1F1" height="48" id="RequestStatusAction" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="330" y="51"/><ellipse cx="345" cy="67" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M347.7656,62.875 Q347.9219,62.6563 348.1094,62.5469 Q348.2969,62.4375 348.5156,62.4375 Q348.8906,62.4375 349.125,62.6953 Q349.3594,62.9531 349.3594,63.5625 L349.3594,65.0156 Q349.3594,65.625 349.125,65.8906 Q348.8906,66.1563 348.5156,66.1563 Q348.1719,66.1563 347.9688,65.9531 Q347.7656,65.7656 347.6563,65.25 Q347.6094,64.8906 347.4219,64.7031 Q347.0938,64.3281 346.4844,64.1094 Q345.875,63.8906 345.25,63.8906 Q344.4844,63.8906 343.8516,64.2188 Q343.2188,64.5469 342.7266,65.2969 Q342.2344,66.0469 342.2344,67.0781 L342.2344,68.1719 Q342.2344,69.4063 343.125,70.2266 Q344.0156,71.0469 345.6094,71.0469 Q346.5469,71.0469 347.2031,70.7969 Q347.5938,70.6406 348.0156,70.2031 Q348.2813,69.9375 348.4297,69.8594 Q348.5781,69.7813 348.7813,69.7813 Q349.1094,69.7813 349.3672,70.0391 Q349.625,70.2969 349.625,70.6406 Q349.625,70.9844 349.2813,71.3906 Q348.7813,71.9688 347.9844,72.2969 Q346.9063,72.75 345.6094,72.75 Q344.0938,72.75 342.8906,72.125 Q341.9063,71.625 341.2188,70.5547 Q340.5313,69.4844 340.5313,68.2031 L340.5313,67.0469 Q340.5313,65.7188 341.1484,64.5703 Q341.7656,63.4219 342.8594,62.8047 Q343.9531,62.1875 345.1875,62.1875 Q345.9219,62.1875 346.5703,62.3516 Q347.2188,62.5156 347.7656,62.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="359" y="72.7285">RequestStatusAction</text><line style="stroke:#181818;stroke-width:0.5;" x1="331" x2="493" y1="83" y2="83"/><line style="stroke:#181818;stroke-width:0.5;" x1="331" x2="493" y1="91" y2="91"/></g><!--MD5=[fc539fa3f3b7db9b31467e896d367b3b]
class Device--><g id="elem_Device"><rect codeLine="38" fill="#F1F1F1" height="118.4375" id="Device" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="204" x="78" y="524"/><ellipse cx="154.25" cy="540" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M157.0156,535.875 Q157.1719,535.6563 157.3594,535.5469 Q157.5469,535.4375 157.7656,535.4375 Q158.1406,535.4375 158.375,535.6953 Q158.6094,535.9531 158.6094,536.5625 L158.6094,538.0156 Q158.6094,538.625 158.375,538.8906 Q158.1406,539.1563 157.7656,539.1563 Q157.4219,539.1563 157.2188,538.9531 Q157.0156,538.7656 156.9063,538.25 Q156.8594,537.8906 156.6719,537.7031 Q156.3438,537.3281 155.7344,537.1094 Q155.125,536.8906 154.5,536.8906 Q153.7344,536.8906 153.1016,537.2188 Q152.4688,537.5469 151.9766,538.2969 Q151.4844,539.0469 151.4844,540.0781 L151.4844,541.1719 Q151.4844,542.4063 152.375,543.2266 Q153.2656,544.0469 154.8594,544.0469 Q155.7969,544.0469 156.4531,543.7969 Q156.8438,543.6406 157.2656,543.2031 Q157.5313,542.9375 157.6797,542.8594 Q157.8281,542.7813 158.0313,542.7813 Q158.3594,542.7813 158.6172,543.0391 Q158.875,543.2969 158.875,543.6406 Q158.875,543.9844 158.5313,544.3906 Q158.0313,544.9688 157.2344,545.2969 Q156.1563,545.75 154.8594,545.75 Q153.3438,545.75 152.1406,545.125 Q151.1563,544.625 150.4688,543.5547 Q149.7813,542.4844 149.7813,541.2031 L149.7813,540.0469 Q149.7813,538.7188 150.3984,537.5703 Q151.0156,536.4219 152.1094,535.8047 Q153.2031,535.1875 154.4375,535.1875 Q155.1719,535.1875 155.8203,535.3516 Q156.4688,535.5156 157.0156,535.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="174.75" y="545.7285">Device</text><line style="stroke:#181818;stroke-width:0.5;" x1="79" x2="281" y1="556" y2="556"/><ellipse cx="89" cy="570.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="98" y="574.5332">ClientId : string</text><ellipse cx="89" cy="587.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="98" y="592.1426">StatusId : DeviceStatusType</text><ellipse cx="89" cy="605.5234" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="98" y="609.752">TypeId : DeviceType</text><ellipse cx="89" cy="623.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="98" y="627.3613">MacAdress : string</text><line style="stroke:#181818;stroke-width:0.5;" x1="79" x2="281" y1="634.4375" y2="634.4375"/></g><!--MD5=[b673b92f67a26e56fbf5e19f78c2d20b]
class DeviceStatusResponse--><g id="elem_DeviceStatusResponse"><rect codeLine="44" fill="#F1F1F1" height="83.2188" id="DeviceStatusResponse" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="90.5" y="381"/><ellipse cx="105.5" cy="397" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M108.2656,392.875 Q108.4219,392.6563 108.6094,392.5469 Q108.7969,392.4375 109.0156,392.4375 Q109.3906,392.4375 109.625,392.6953 Q109.8594,392.9531 109.8594,393.5625 L109.8594,395.0156 Q109.8594,395.625 109.625,395.8906 Q109.3906,396.1563 109.0156,396.1563 Q108.6719,396.1563 108.4688,395.9531 Q108.2656,395.7656 108.1563,395.25 Q108.1094,394.8906 107.9219,394.7031 Q107.5938,394.3281 106.9844,394.1094 Q106.375,393.8906 105.75,393.8906 Q104.9844,393.8906 104.3516,394.2188 Q103.7188,394.5469 103.2266,395.2969 Q102.7344,396.0469 102.7344,397.0781 L102.7344,398.1719 Q102.7344,399.4063 103.625,400.2266 Q104.5156,401.0469 106.1094,401.0469 Q107.0469,401.0469 107.7031,400.7969 Q108.0938,400.6406 108.5156,400.2031 Q108.7813,399.9375 108.9297,399.8594 Q109.0781,399.7813 109.2813,399.7813 Q109.6094,399.7813 109.8672,400.0391 Q110.125,400.2969 110.125,400.6406 Q110.125,400.9844 109.7813,401.3906 Q109.2813,401.9688 108.4844,402.2969 Q107.4063,402.75 106.1094,402.75 Q104.5938,402.75 103.3906,402.125 Q102.4063,401.625 101.7188,400.5547 Q101.0313,399.4844 101.0313,398.2031 L101.0313,397.0469 Q101.0313,395.7188 101.6484,394.5703 Q102.2656,393.4219 103.3594,392.8047 Q104.4531,392.1875 105.6875,392.1875 Q106.4219,392.1875 107.0703,392.3516 Q107.7188,392.5156 108.2656,392.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="119.5" y="402.7285">DeviceStatusResponse</text><line style="stroke:#181818;stroke-width:0.5;" x1="91.5" x2="268.5" y1="413" y2="413"/><ellipse cx="101.5" cy="427.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="110.5" y="431.5332">Device : Device</text><ellipse cx="101.5" cy="444.9141" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="110.5" y="449.1426">Data : object</text><line style="stroke:#181818;stroke-width:0.5;" x1="91.5" x2="268.5" y1="456.2188" y2="456.2188"/></g><!--MD5=[d7a66d72311a36bc48f68de8f64600c4]
class SocketData--><g id="elem_SocketData"><rect codeLine="48" fill="#F1F1F1" height="65.6094" id="SocketData" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="1747" y="42"/><ellipse cx="1773.25" cy="58" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1776.0156,53.875 Q1776.1719,53.6563 1776.3594,53.5469 Q1776.5469,53.4375 1776.7656,53.4375 Q1777.1406,53.4375 1777.375,53.6953 Q1777.6094,53.9531 1777.6094,54.5625 L1777.6094,56.0156 Q1777.6094,56.625 1777.375,56.8906 Q1777.1406,57.1563 1776.7656,57.1563 Q1776.4219,57.1563 1776.2188,56.9531 Q1776.0156,56.7656 1775.9063,56.25 Q1775.8594,55.8906 1775.6719,55.7031 Q1775.3438,55.3281 1774.7344,55.1094 Q1774.125,54.8906 1773.5,54.8906 Q1772.7344,54.8906 1772.1016,55.2188 Q1771.4688,55.5469 1770.9766,56.2969 Q1770.4844,57.0469 1770.4844,58.0781 L1770.4844,59.1719 Q1770.4844,60.4063 1771.375,61.2266 Q1772.2656,62.0469 1773.8594,62.0469 Q1774.7969,62.0469 1775.4531,61.7969 Q1775.8438,61.6406 1776.2656,61.2031 Q1776.5313,60.9375 1776.6797,60.8594 Q1776.8281,60.7813 1777.0313,60.7813 Q1777.3594,60.7813 1777.6172,61.0391 Q1777.875,61.2969 1777.875,61.6406 Q1777.875,61.9844 1777.5313,62.3906 Q1777.0313,62.9688 1776.2344,63.2969 Q1775.1563,63.75 1773.8594,63.75 Q1772.3438,63.75 1771.1406,63.125 Q1770.1563,62.625 1769.4688,61.5547 Q1768.7813,60.4844 1768.7813,59.2031 L1768.7813,58.0469 Q1768.7813,56.7188 1769.3984,55.5703 Q1770.0156,54.4219 1771.1094,53.8047 Q1772.2031,53.1875 1773.4375,53.1875 Q1774.1719,53.1875 1774.8203,53.3516 Q1775.4688,53.5156 1776.0156,53.875 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="1789.75" y="63.7285">SocketData</text><line style="stroke:#181818;stroke-width:0.5;" x1="1748" x2="1876" y1="74" y2="74"/><ellipse cx="1758" cy="88.3047" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1767" y="92.5332">TurnedOn : bool</text><line style="stroke:#181818;stroke-width:0.5;" x1="1748" x2="1876" y1="99.6094" y2="99.6094"/></g><!--MD5=[a0ee303909b9da90fcb0f15e0070dbd9]
class DeviceStatus--><g id="elem_DeviceStatus"><rect codeLine="51" fill="#F1F1F1" height="118.4375" id="DeviceStatus" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="28.5" y="702"/><ellipse cx="56.1" cy="718" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M54.9594,718.7969 L54.9594,721.2969 L59.2875,721.2969 L59.2875,720.375 Q59.2875,719.7656 59.5297,719.5 Q59.7719,719.2344 60.1469,719.2344 Q60.5219,719.2344 60.7563,719.5 Q60.9906,719.7656 60.9906,720.375 L60.9906,723 L52.9906,723 Q52.3656,723 52.1078,722.7656 Q51.85,722.5313 51.85,722.1406 Q51.85,721.7656 52.1156,721.5313 Q52.3813,721.2969 52.9906,721.2969 L53.2563,721.2969 L53.2563,714.6406 L52.9906,714.6406 Q52.3656,714.6406 52.1078,714.4063 Q51.85,714.1719 51.85,713.7813 Q51.85,713.4063 52.1078,713.1719 Q52.3656,712.9375 52.9906,712.9375 L60.6156,712.9375 L60.6156,715.5313 Q60.6156,716.1406 60.3891,716.3984 Q60.1625,716.6563 59.7719,716.6563 Q59.3969,716.6563 59.1625,716.3984 Q58.9281,716.1406 58.9281,715.5313 L58.9281,714.6406 L54.9594,714.6406 L54.9594,717.0938 L56.4438,717.0938 Q56.4438,716.4375 56.5688,716.25 Q56.8344,715.8438 57.3031,715.8438 Q57.6781,715.8438 57.9125,716.1016 Q58.1469,716.3594 58.1469,716.9688 L58.1469,718.9375 Q58.1469,719.4844 58.0219,719.6719 Q57.7563,720.0625 57.3031,720.0625 Q56.8344,720.0625 56.5688,719.6563 Q56.4438,719.4688 56.4438,718.7969 L54.9594,718.7969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="72.9" y="723.7285">DeviceStatus</text><line style="stroke:#181818;stroke-width:0.5;" x1="29.5" x2="170.5" y1="734" y2="734"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="34.5" y="752.5332">Unknown : 0</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="34.5" y="770.1426">TurnedOff : 1</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="34.5" y="787.752">TurnedOn : 2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="34.5" y="805.3613">ConnectedToHub : 3</text><line style="stroke:#181818;stroke-width:0.5;" x1="29.5" x2="170.5" y1="812.4375" y2="812.4375"/></g><!--MD5=[1499b21a70e8fe1944bc4cdebe8209d2]
class DeviceType--><g id="elem_DeviceType"><rect codeLine="58" fill="#F1F1F1" height="83.2188" id="DeviceType" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="206.5" y="719.5"/><ellipse cx="221.5" cy="735.5" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M220.3594,736.2969 L220.3594,738.7969 L224.6875,738.7969 L224.6875,737.875 Q224.6875,737.2656 224.9297,737 Q225.1719,736.7344 225.5469,736.7344 Q225.9219,736.7344 226.1563,737 Q226.3906,737.2656 226.3906,737.875 L226.3906,740.5 L218.3906,740.5 Q217.7656,740.5 217.5078,740.2656 Q217.25,740.0313 217.25,739.6406 Q217.25,739.2656 217.5156,739.0313 Q217.7813,738.7969 218.3906,738.7969 L218.6563,738.7969 L218.6563,732.1406 L218.3906,732.1406 Q217.7656,732.1406 217.5078,731.9063 Q217.25,731.6719 217.25,731.2813 Q217.25,730.9063 217.5078,730.6719 Q217.7656,730.4375 218.3906,730.4375 L226.0156,730.4375 L226.0156,733.0313 Q226.0156,733.6406 225.7891,733.8984 Q225.5625,734.1563 225.1719,734.1563 Q224.7969,734.1563 224.5625,733.8984 Q224.3281,733.6406 224.3281,733.0313 L224.3281,732.1406 L220.3594,732.1406 L220.3594,734.5938 L221.8438,734.5938 Q221.8438,733.9375 221.9688,733.75 Q222.2344,733.3438 222.7031,733.3438 Q223.0781,733.3438 223.3125,733.6016 Q223.5469,733.8594 223.5469,734.4688 L223.5469,736.4375 Q223.5469,736.9844 223.4219,737.1719 Q223.1563,737.5625 222.7031,737.5625 Q222.2344,737.5625 221.9688,737.1563 Q221.8438,736.9688 221.8438,736.2969 L220.3594,736.2969 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="235.5" y="741.2285">DeviceType</text><line style="stroke:#181818;stroke-width:0.5;" x1="207.5" x2="312.5" y1="751.5" y2="751.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="212.5" y="770.0332">Hub : 0</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="212.5" y="787.6426">Socket : 1</text><line style="stroke:#181818;stroke-width:0.5;" x1="207.5" x2="312.5" y1="794.7188" y2="794.7188"/></g><!--MD5=[e936a1c6715fe295fe8104a0021734fd]
link MqttServerHandler to IServerHandler--><g id="link_MqttServerHandler_IServerHandler"><path codeLine="63" d="M1284.4,143.05 C1255.45,159.28 1224.48,176.64 1195.45,192.91 " fill="none" id="MqttServerHandler-to-IServerHandler" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1198.53,199.21,1177.66,202.89,1191.68,187,1198.53,199.21" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5bffdc1c307f388d003c241af3e94f09]
reverse link ServerController to IServerHandler--><g id="link_ServerController_IServerHandler"><path codeLine="64" d="M893.52,141.33 C923.77,161.38 956.84,183.32 986.32,202.86 " fill="none" id="ServerController-backto-IServerHandler" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="882.51,134.03,885.2977,140.6805,892.5088,140.6651,889.7211,134.0146,882.51,134.03" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b6f4c0d3b560b1e731935e4f5faf8ea2]
reverse link ServerController to IMessageAction--><g id="link_ServerController_IMessageAction"><path codeLine="65" d="M725.41,143.4 C698.73,169.24 669.14,197.91 645.85,220.47 " fill="none" id="ServerController-backto-IMessageAction" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="735.09,134.03,727.9968,135.3287,726.4674,142.3757,733.5606,141.0771,735.09,134.03" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[de17ca6d671d9bae90fbd841359d620d]
link RequestStatusAction to IMessageAction--><g id="link_RequestStatusAction_IMessageAction"><path codeLine="67" d="M435.93,99.06 C463.58,125.7 510.04,170.47 547.11,206.19 " fill="none" id="RequestStatusAction-to-IMessageAction" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="552.28,201.45,561.83,220.36,542.57,211.53,552.28,201.45" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ad4419857b214600526d5ce47cbcf0c2]
reverse link RequestStatusAction to IServerHandler--><g id="link_RequestStatusAction_IServerHandler"><path codeLine="68" d="M450.02,107.18 C467.61,120.12 489.37,134.15 511,143 C647.34,198.8 692.95,172.14 837,203 C843.01,204.29 849.09,205.61 855.23,206.97 " fill="none" id="RequestStatusAction-backto-IServerHandler" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="439.65,99.32,442.0126,106.1331,449.2103,106.5726,446.8477,99.7596,439.65,99.32" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[1498ed60b6e487fa8397268dac80781c]
reverse link RequestStatusAction to IDeviceManager--><g id="link_RequestStatusAction_IDeviceManager"><path codeLine="69" d="M372.66,107.37 C333.63,138.49 273.62,186.34 230.96,220.36 " fill="none" id="RequestStatusAction-backto-IDeviceManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="383.09,99.06,375.9046,99.6687,373.7029,106.5354,380.8882,105.9268,383.09,99.06" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[3e16a51887178b28068f98351501c369]
reverse link IDeviceManager to DeviceStatusResponse--><g id="link_IDeviceManager_DeviceStatusResponse"><path codeLine="72" d="M180,317.09 C180,337.96 180,361.43 180,380.82 " fill="none" id="IDeviceManager-backto-DeviceStatusResponse" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="180,303.82,176,309.82,180,315.82,184,309.82,180,303.82" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[989eca5ed30202649d42b2093d1ac479]
reverse link DeviceStatusResponse to Device--><g id="link_DeviceStatusResponse_Device"><path codeLine="73" d="M180,477.6 C180,492.55 180,508.83 180,524 " fill="none" id="DeviceStatusResponse-backto-Device" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="180,464.32,176,470.32,180,476.32,184,470.32,180,464.32" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[972e1175cd448ecffd33b20867a30a43]
reverse link Device to DeviceStatus--><g id="link_Device_DeviceStatus"><path codeLine="74" d="M145.16,660.64 C138.87,674.49 132.4,688.73 126.39,701.94 " fill="none" id="Device-backto-DeviceStatus" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="138.93,657.43,153.58,642.12,151.68,663.22,138.93,657.43" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[644ceada3e955b153a45e78a017c5407]
reverse link Device to DeviceType--><g id="link_Device_DeviceType"><path codeLine="75" d="M214.74,660.42 C223.97,680.74 233.59,701.91 241.58,719.47 " fill="none" id="Device-backto-DeviceType" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="208.32,663.22,206.42,642.12,221.07,657.43,208.32,663.22" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[022f69a5149bdf530f517631d684dabf]
@startuml XPowerHub

interface IMessageAction {
    +Action(clientId : string, topic : string, payload : string) : void
    +CanExecute(clientId : string, topic : string, payload : string) : bool
}

interface IServerHandler {
    +MessageEventHandler {+get; +set;} : Action<string, string, string>
    +StartAsync() : Task
    +PublishAsync(topic : string, payload : string) : Task
    +StopAsync() : Task
}

class MqttServerHandler {
    +ServerId {+get; -set} : string
    +MessageEventHandler {+get; +set} : Action<string, string, string>
    -mqttServer {readonly} : MqttServer
    +MqttServerHandler(mqttServer : MqttServer)
    -OnMessageNotConsumedAsync(packet : ApplicationMessageNotConsumedEventArgs) : Task
}

class ServerController {
    +Actions {+get; +set;} : list<IMessageAction>
    -serverHandler {readonly} : IServerHandler
    +ServerController(actions : list<IMessageAction>, serverHandler : IServerHandler)
    -OnMessageReceived(clientId : string, topic : string, payload : string) : void
}

class IDeviceManager{
    +GetDevices() : List<Device>
    +GetStatusDevices() : List<DeviceStatusResponse>
}

class RequestStatusAction {

}

class Device{
    +ClientId : string
    +StatusId : DeviceStatusType
    +TypeId : DeviceType
    +MacAdress : string
}
class DeviceStatusResponse{
    +Device : Device
    +Data : object
}
class SocketData{
    +TurnedOn : bool
}
enum DeviceStatus{
    Unknown : 0
    TurnedOff : 1
    TurnedOn : 2
    ConnectedToHub : 3
}

enum DeviceType{
    Hub : 0
    Socket : 1
}

MqttServerHandler ..|> IServerHandler
ServerController o.. IServerHandler
ServerController o.. IMessageAction

RequestStatusAction ..|> IMessageAction
RequestStatusAction o- - IServerHandler
RequestStatusAction o- - IDeviceManager


IDeviceManager *- - DeviceStatusResponse
DeviceStatusResponse *- - Device
Device <|- - DeviceStatus
Device <|- - DeviceType



@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>