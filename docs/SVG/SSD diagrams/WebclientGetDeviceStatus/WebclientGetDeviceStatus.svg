<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="487px" preserveAspectRatio="none" style="width:739px;height:487px;background:#FFFFFF;" version="1.1" viewBox="0 0 739 487" width="739px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="107.0547" style="stroke:#000000;stroke-width:1.5;" width="222.5" x="202" y="310.0703"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="38" x2="38" y1="54.6094" y2="434.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="252" x2="252" y1="54.6094" y2="434.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="446.5" x2="446.5" y1="54.6094" y2="434.125"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="700.5" x2="700.5" y1="54.6094" y2="434.125"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="5" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="12" y="43.5332">IoTPage</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="67" x="5" y="433.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="12" y="454.6582">IoTPage</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="212" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="219" y="43.5332">IoTService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="212" y="433.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="219" y="454.6582">IoTService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="402.5" y="22"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="409.5" y="43.5332">MqttService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="402.5" y="433.125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="409.5" y="454.6582">MqttService</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="662.5" y="51.5332">IoTDevices</text><ellipse cx="700.5" cy="21" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="688.5" x2="712.5" y1="35" y2="35"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="662.5" y="447.6582">IoTDevices</text><ellipse cx="700.5" cy="466.7344" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="688.5" x2="712.5" y1="480.7344" y2="480.7344"/><polygon fill="#181818" points="240.5,82.9609,250.5,86.9609,240.5,90.9609,244.5,86.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="38.5" x2="246.5" y1="86.9609" y2="86.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="45.5" y="82.1045">Call Get Status From Iot Devices</text><polygon fill="#181818" points="434.5,113.3125,444.5,117.3125,434.5,121.3125,438.5,117.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="252.5" x2="440.5" y1="117.3125" y2="117.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="259.5" y="112.4561">Publish request to iot devices</text><polygon fill="#181818" points="688.5,143.6641,698.5,147.6641,688.5,151.6641,692.5,147.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="446.5" x2="694.5" y1="147.6641" y2="147.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="453.5" y="142.8076">Sends status data request</text><polygon fill="#181818" points="457.5,174.0156,447.5,178.0156,457.5,182.0156,453.5,178.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="451.5" x2="699.5" y1="178.0156" y2="178.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="463.5" y="173.1592">Sends status data to subscribed clients</text><polygon fill="#181818" points="263.5,204.3672,253.5,208.3672,263.5,212.3672,259.5,208.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="257.5" x2="445.5" y1="208.3672" y2="208.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="269.5" y="203.5107">Call subscribed method</text><line style="stroke:#181818;stroke-width:1.0;" x1="252.5" x2="294.5" y1="238.7188" y2="238.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="294.5" x2="294.5" y1="238.7188" y2="251.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="253.5" x2="294.5" y1="251.7188" y2="251.7188"/><polygon fill="#181818" points="263.5,247.7188,253.5,251.7188,263.5,255.7188,259.5,251.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="259.5" y="233.8623">Get device type</text><line style="stroke:#181818;stroke-width:1.0;" x1="252.5" x2="294.5" y1="282.0703" y2="282.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="294.5" x2="294.5" y1="282.0703" y2="295.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="253.5" x2="294.5" y1="295.0703" y2="295.0703"/><polygon fill="#181818" points="263.5,291.0703,253.5,295.0703,263.5,299.0703,259.5,295.0703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="259.5" y="277.2139">Device exists in array?</text><path d="M202,310.0703 L263,310.0703 L263,318.4219 L253,328.4219 L202,328.4219 L202,310.0703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="107.0547" style="stroke:#000000;stroke-width:1.5;" width="222.5" x="202" y="310.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="217" y="324.5654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="42" x="278" y="323.4893">[exists]</text><line style="stroke:#181818;stroke-width:1.0;" x1="252.5" x2="294.5" y1="350.7734" y2="350.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="294.5" x2="294.5" y1="350.7734" y2="363.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="253.5" x2="294.5" y1="363.7734" y2="363.7734"/><polygon fill="#181818" points="263.5,359.7734,253.5,363.7734,263.5,367.7734,259.5,363.7734" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="259.5" y="345.917">Update known device</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202" x2="424.5" y1="372.7734" y2="372.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="252.5" x2="294.5" y1="396.125" y2="396.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="294.5" x2="294.5" y1="396.125" y2="409.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="253.5" x2="294.5" y1="409.125" y2="409.125"/><polygon fill="#181818" points="263.5,405.125,253.5,409.125,263.5,413.125,259.5,409.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="259.5" y="391.2686">push new device into array</text><!--MD5=[745e04cc6672bf52a08891a632fe1c40]
@startuml WebclientGetDeviceStatus

participant IoTPage as page
participant IoTService as service
participant MqttService as mqttService
entity IoTDevices as client

page -> service: Call Get Status From Iot Devices
service -> mqttService: Publish request to iot devices
mqttService - -> client: Sends status data request

client -> mqttService: Sends status data to subscribed clients
mqttService -> service: Call subscribed method
service -> service: Get device type
service -> service: Device exists in array?
alt exists
    service -> service: Update known device
else
    service -> service: push new device into array
end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>