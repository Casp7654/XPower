<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="817px" preserveAspectRatio="none" style="width:929px;height:817px;background:#FFFFFF;" version="1.1" viewBox="0 0 929 817" width="929px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="203" x="364.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="193" x="369.75" y="29.5332">Webklient to Hub Bluetooth</text><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="387" x="10" y="257.9766"/><rect fill="none" height="442.9219" style="stroke:#000000;stroke-width:1.5;" width="913.5" x="10" y="320.6797"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="480" x="413" y="541.1406"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="480" x="413" y="647.1953"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="68" x2="68" y1="76.2188" y2="780.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="321" x2="321" y1="76.2188" y2="780.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="499" x2="499" y1="76.2188" y2="780.6016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="786" x2="786" y1="76.2188" y2="780.6016"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="20" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="27" y="65.1426">HubSearcher</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="20" y="779.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="27" y="801.1348">HubSearcher</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="256" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="263" y="65.1426">HubSearchService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="256" y="779.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="263" y="801.1348">HubSearchService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="423" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="430" y="65.1426">BleConnectionService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="423" y="779.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="430" y="801.1348">BleConnectionService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="690" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="697" y="65.1426">BleConnectionCharacteristic</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="193" x="690" y="779.6016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="697" y="801.1348">BleConnectionCharacteristic</text><polygon fill="#181818" points="309.5,104.5703,319.5,108.5703,309.5,112.5703,313.5,108.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="68.5" x2="315.5" y1="108.5703" y2="108.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="75.5" y="103.7139">Search for devices</text><polygon fill="#181818" points="79.5,134.9219,69.5,138.9219,79.5,142.9219,75.5,138.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.5" x2="320.5" y1="138.9219" y2="138.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="85.5" y="134.0654">Devices found</text><line style="stroke:#181818;stroke-width:1.0;" x1="68.5" x2="110.5" y1="169.2734" y2="169.2734"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="110.5" y1="169.2734" y2="182.2734"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="110.5" y1="182.2734" y2="182.2734"/><polygon fill="#181818" points="79.5,178.2734,69.5,182.2734,79.5,186.2734,75.5,182.2734" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="75.5" y="164.417">Select device</text><polygon fill="#181818" points="309.5,208.625,319.5,212.625,309.5,216.625,313.5,212.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="68.5" x2="315.5" y1="212.625" y2="212.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="75.5" y="207.7686">Connect to device</text><polygon fill="#181818" points="487.5,238.9766,497.5,242.9766,487.5,246.9766,491.5,242.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="493.5" y1="242.9766" y2="242.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="328.5" y="238.1201">Connection request</text><path d="M10,257.9766 L71,257.9766 L71,266.3281 L61,276.3281 L10,276.3281 L10,257.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="387" x="10" y="257.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="272.4717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="43" x="86" y="271.3955">[Not ok]</text><polygon fill="#181818" points="79.5,294.6797,69.5,298.6797,79.5,302.6797,75.5,298.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.5" x2="320.5" y1="298.6797" y2="298.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163" x="85.5" y="293.8232">Couldn't connect with device</text><path d="M10,320.6797 L71,320.6797 L71,329.0313 L61,339.0313 L10,339.0313 L10,320.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="442.9219" style="stroke:#000000;stroke-width:1.5;" width="913.5" x="10" y="320.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="335.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="23" x="86" y="334.0986">[Ok]</text><polygon fill="#181818" points="332.5,357.3828,322.5,361.3828,332.5,365.3828,328.5,361.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="326.5" x2="498.5" y1="361.3828" y2="361.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="338.5" y="356.5264">Connected</text><polygon fill="#181818" points="79.5,387.7344,69.5,391.7344,79.5,395.7344,75.5,391.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.5" x2="320.5" y1="391.7344" y2="391.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="85.5" y="386.8779">Connected</text><line style="stroke:#181818;stroke-width:1.0;" x1="68.5" x2="110.5" y1="422.0859" y2="422.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="110.5" x2="110.5" y1="422.0859" y2="435.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="110.5" y1="435.0859" y2="435.0859"/><polygon fill="#181818" points="79.5,431.0859,69.5,435.0859,79.5,439.0859,75.5,435.0859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="75.5" y="417.2295">Get ssid and passphrase of local network</text><polygon fill="#181818" points="309.5,461.4375,319.5,465.4375,309.5,469.4375,313.5,465.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="68.5" x2="315.5" y1="465.4375" y2="465.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="75.5" y="460.5811">Send ssid and passphrase</text><polygon fill="#181818" points="487.5,491.7891,497.5,495.7891,487.5,499.7891,491.5,495.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="321.5" x2="493.5" y1="495.7891" y2="495.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="328.5" y="490.9326">Send ssid and passphrase</text><polygon fill="#181818" points="774.5,522.1406,784.5,526.1406,774.5,530.1406,778.5,526.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="499.5" x2="780.5" y1="526.1406" y2="526.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="506.5" y="521.2842">Connect to network with ssid and passphrase</text><path d="M413,541.1406 L474,541.1406 L474,549.4922 L464,559.4922 L413,559.4922 L413,541.1406 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="480" x="413" y="541.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="428" y="555.6357">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="81" x="489" y="554.5596">[not conneted]</text><polygon fill="#181818" points="510.5,577.8438,500.5,581.8438,510.5,585.8438,506.5,581.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="504.5" x2="785.5" y1="581.8438" y2="581.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="516.5" y="576.9873">Respond with error message</text><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="828.5" y1="619.1953" y2="619.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="828.5" x2="828.5" y1="619.1953" y2="632.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="787.5" x2="828.5" y1="632.1953" y2="632.1953"/><polygon fill="#181818" points="797.5,628.1953,787.5,632.1953,797.5,636.1953,793.5,632.1953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="793.5" y="614.3389">Get local IP address</text><path d="M413,647.1953 L474,647.1953 L474,655.5469 L464,665.5469 L413,665.5469 L413,647.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="48.7031" style="stroke:#000000;stroke-width:1.5;" width="480" x="413" y="647.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="428" y="661.6904">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="66" x="489" y="660.6143">[connected]</text><polygon fill="#181818" points="510.5,683.8984,500.5,687.8984,510.5,691.8984,506.5,687.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="504.5" x2="785.5" y1="687.8984" y2="687.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="516.5" y="683.042">Respond with local IP address</text><polygon fill="#181818" points="332.5,721.25,322.5,725.25,332.5,729.25,328.5,725.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="326.5" x2="498.5" y1="725.25" y2="725.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="338.5" y="720.3936">Receive response</text><polygon fill="#181818" points="79.5,751.6016,69.5,755.6016,79.5,759.6016,75.5,755.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="73.5" x2="320.5" y1="755.6016" y2="755.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="85.5" y="750.7451">Show response</text><!--MD5=[003254bb6a3fcf6ef6a547e2dd4338f4]
@startuml Hub SD diagrams
title Webklient to Hub Bluetooth

participant HubSearcher
participant HubSearchService
participant BleConnectionService
participant BleConnectionCharacteristic


HubSearcher->HubSearchService: Search for devices
HubSearchService->HubSearcher: Devices found
HubSearcher->HubSearcher: Select device
HubSearcher->HubSearchService: Connect to device
HubSearchService->BleConnectionService: Connection request

alt Not ok
HubSearchService->HubSearcher: Couldn't connect with device
end 

alt Ok
BleConnectionService->HubSearchService: Connected
HubSearchService->HubSearcher: Connected
HubSearcher->HubSearcher: Get ssid and passphrase of local network
HubSearcher->HubSearchService: Send ssid and passphrase
HubSearchService->BleConnectionService: Send ssid and passphrase
BleConnectionService->BleConnectionCharacteristic:Connect to network with ssid and passphrase

alt not conneted
BleConnectionCharacteristic->BleConnectionService:  Respond with error message  
end


BleConnectionCharacteristic->BleConnectionCharacteristic: Get local IP address
alt connected
BleConnectionCharacteristic->BleConnectionService: Respond with local IP address
end

BleConnectionService->HubSearchService: Receive response
HubSearchService->HubSearcher: Show response

end 



@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>